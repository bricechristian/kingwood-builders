---
import { useSanityClient } from "astro-sanity";

import { urlForImage } from "../utilities/sanityImage.js";

import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";

export const prerender = true;

const data = await useSanityClient().fetch(`
  *[_type=='page' && slug.current == "landing"][0] {
	..., 
    content[] {
      ...
	}	
  }
`);

const { content } = data;

const featuredImage = content[0].images[0];
---

<style>

	@media (max-width: 479px) and (orientation: portrait){
		section {
			min-height: auto;
		}
	}
	@media (orientation: landscape){
		section {
			min-height: 600px;
		}
	}
	picture:before {
		content: "";
		display: inline-block;
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: rgba(235, 234, 223,.4);
		z-index: 11;
	}
	@media (max-width: 991px){
		picture:before {
			background: rgba(235, 234, 223,.7);
		}
	}
</style>

<Layout>
	<section class="flex flex-col flex-grow">
		<div class="grid-layout flex-grow grid-rows-[auto_1fr]">
			<div class="pt-32 col-start-2 col-span-10 md:pt-24">
				<h1
					class="text-[clamp(50px,6.5vw,120px)] leading-[.9] relative z-20"
				>
					<span class="typography-shift block">
						<span>Let's build</span>
					</span>
					<span class="typography-shift block" data-delay=".15">
						<span>
							something <span class="font-medium"
						>great.</span>
						</span>
					</span>
				</h1>
				<p class="relative z-20 max-w-sm mt-2 pr-12 shift-up" data-delay=".2">Pellentesque commodo eros a enim. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; In ac dui quis mi consectetuer lacinia. Curabitur vestibulum aliquam leo. Praesent ut ligula non mi varius sagittis.</p>
				<div class="shift-up relative z-20" data-delay=".35">
					<a href="#" class="button mt-4">Contact Us</a>
				</div>
			</div>
			<div class="relative col-start-3 col-span-10 -mt-[257px] md:-mt-[270px]">
				<div
					class="absolute -top-[10vw] -left-[10vw] w-[clamp(200px,30vw,30vw)] h-[clamp(200px,30vw,30vw)] rounded-full bg-[#dce257] blur-[100px] md:blur-[60px] md:-top-[15vw] md:-left-[15vw]"
				>
				</div>
				<div class="grid grid-cols-10 w-full absolute z-20 bottom-20 right-6 sm:bottom-6">
					<div class="col-start-10">
						<div class="-rotate-90 origin-left relative">
							<div class="absolute top-full right-0 w-full font-medium text-20 whitespace-nowrap sm:text-14">Charleston, SC</div>
						</div>
					</div>
				</div>
				<picture>
					<source
						srcset={urlForImage(featuredImage.asset)
							.format("webp")
							.quality(80)
							.url()}
						type="image/webp"
						media="(min-width: 1200px)"
					/>
					<source
						srcset={urlForImage(featuredImage.asset)
							.maxWidth(1200)
							.format("webp")
							.quality(80)
							.url()}
						type="image/webp"
						media="(min-width: 768px)"
					/>
					<source
						srcset={urlForImage(featuredImage.asset)
							.maxWidth(800)
							.format("webp")
							.quality(80)
							.url()}
						type="image/webp"
						media="(min-width: 479px)"
					/>
					<source
						srcset={urlForImage(featuredImage.asset)
							.maxWidth(500)
							.format("webp")
							.quality(60)
							.url()}
						type="image/webp"
						media="(max-width: 478px)"
					/>
					<img
						class={`w-full h-full object-cover absolute z-10`}
						src={urlForImage(featuredImage.asset)
							.maxWidth(800)
							.quality(80)
							.url()}
						width="1920"
						height="1080"
						alt={featuredImage.alt}
						srcset={`${urlForImage(featuredImage.asset)
							.maxWidth(800)
							.quality(80)
							.url()} 479w,
						${urlForImage(featuredImage.asset).maxWidth(1200).quality(80).url()} 768w,
						${urlForImage(featuredImage.asset).maxWidth(1920).quality(80).url()} 1200w`}
						sizes="(max-width: 768px) 100vw, (max-width: 1200px) 1400px, 1920px"
					/>
				</picture>
			</div>
		</div>
	</section>
</Layout>
